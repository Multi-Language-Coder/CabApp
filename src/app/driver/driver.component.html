<html>

<head>
    <title>Requests Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <style>
    </style>
</head>

<body>
    <div class="alert alert-info" style="display:none;" id="messageBox">
        {{confirmText}}
    </div>
    <div id="sidebar1" class="collapsed">
        <button id="toggleSidebar" class="btn btn-dark">â˜°</button>
        <div id="sidebar-header">Chat Driver</div>
        <div id="sidebar-content">
            <app-chat-driver></app-chat-driver>
        </div>
    </div>
    <nav class="navbar navbar-expand navbar-dark bg-dark">
        <div class="container-fluid">
            <div class="navbar-nav">
                <a class="nav-link" href="/login">
                    <i class="bi bi-house-fill"></i>
                    Sign Out
                </a>
                <a class="nav-link" href="/profilePage">
                    <i class="bi bi-house-fill"></i>
                    Profile Page
                </a>
            </div>
        </div>
    </nav>
    <div *ngIf="loading" id="loadingScreen">
        <h1 class="display-1">Loading Content</h1>
    </div>
    <div *ngIf="!loading" id="MainScreen">
        <h2 class="display-1">User Requests</h2>
        <div id="googleMap"></div>
        <table class="table table-bordered table-hover table-dark table-striped">
            <thead>
                <th>User</th>
                <th>From Location</th>
                <th>To Location</th>
                <th>Price</th>
                <th>Post Map</th>
                <th>Accept</th>
                <th>Deny</th>
            </thead>
            <tbody>
                    @for(request of userrequests; track request.cabid){
                        <tr id="{{request.cabid}}">
                    <td>{{request.userrequested}}</td>
                    <td>{{request.fromLocation}}</td>
                    <td>{{request.toLocation}}</td>
                    <td>${{pullAsync(calculatePricing(request))}}</td>
                    <td><button class="btn btn-dark postMap">Post Map</button></td>
                    <td><button class="btn btn-success acceptRequest" id="{{request.accepted}}">Accept</button></td>
                    <td><button class="btn btn-danger denyRequest" id="{{request.accepted}}">Deny</button></td>
                </tr>
                    } @empty{
 <tr>
                    <td>No Requests</td>
                    <td>No Requests</td>
                    <td>No Requests</td>
                    <td>No Requests</td>
                    <td>No Requests</td>
                    <td>No Requests</td>
                    <td>No Requests</td>
                    <td>No Requests</td>
                    <td>No Requests</td>
                    <td>No Requests</td>
                </tr>
                    }
                    
            </tbody>
        </table>
    </div>

</body>

</html>