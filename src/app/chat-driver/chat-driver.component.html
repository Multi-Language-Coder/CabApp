<html>
<body>
    <div *ngIf="!chatAvailable">
        <h3>No Available Drivers to communicate to</h3>
    </div>
    <div *ngIf="chatAvailable">
        <h3>Speaking to: <span>{{driverUser}}</span></h3>
        <div id="chat">
            <div id="messages">
                @for(message of messages; track trackByMessageIndex($index,message)){
                    <div class="message">
                        {{message.sender}}: {{message.text}}
                    </div>
                }
            </div>
            <div id="chat-input">
                <input
                    type="text"
                    id="messageInput"
                    placeholder="Type your message here..."
                    [(ngModel)]="newMessage"
                    class="form-control"
                />
                <button
                    id="sendButton"
                    class="btn btn-primary mt-2"
                    (click)="sendMessage()"
                >
                    Send
                </button>
                <button
                    id="sendButton"
                    class="btn btn-danger mt-2"
                    (click)="endChat()"
                >
                    End Chat
                </button>
            </div>
        </div>
    </div>
</body>
</html>